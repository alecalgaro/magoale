<!-- Librerías necesarias -->
<!-- Augmented Reality on the Web in 10 lines of html! https://github.com/jeromeetienne/ar.js -->
<script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
<!-- aframe-keyboard-controls.js Permite todas las accion utilizando el Teclado -->
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/dev/aframe/build/aframe-ar.js"></script>
<script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>

<!-- También se puede usar los archivo .js incluidos en el proyecto en lugar de llamar las librerías
    desde internet. Son diferentes porque las librerías tienen actualizaciones con el tiempo -->
    
<div style=" position: fixed; top: 10px; width: 100%;text-align: center;z-index: 1;">
  <button>  <!-- Botón por defecto, se puede crear uno mejor con con otros estilos -->
    Activar sonido
  </button>
</div>

<!-- Le informo a la app que va a tener un tipo de interacción, sino mi app en dispositivos ios va a 
  reproducir el vídeo sin audio. En PC y android no hay ese problema. -->
<meta name="apple-mobile-web-app-capable" content="yes" />

<body style="margin: 0px; overflow: hidden;"> <!-- Estilo del cuerpo de la página -->
  <!-- Para quitar de la pantalla una información que agrega arjs y el símbolo de realidad virtual de la esquina inferior izquierda -->
  <a-scene embedded arjs="debugUIEnabled: false;" vr-mode-ui="enabled: false"> 
    
    <!-- Para usar un marcador de barras lo crea acá: https://ar-js-org.github.io/AR.js/three.js/examples/marker-training/examples/generator.html
          y luego se pone el .patt en "url" que se descarga desde "Dowload marker" y para enfocar se usa la imagen
          que se descarga desde "dowload image"-->
    <!-- Para usar el marcador "hiro" que viene por defecto, se pone simplemente <a-marker preset="hiro"> y se borra el resto -->
    <a-marker preset="custom" type="pattern" url="marcadores/pattern-marker.patt">
      
      <!-- Agrego el vídeo y algunas opciones:
        crossorigin="anonymous" es para que nos permita estar en internet y no tengamos ningun problema con la aplicación por un cruce de información,
        el resto es una línea de seguridad que se agrega para dispositivos ios, "autoplay" es para que comience automáticamente, "controls" 
        es para cuando se usa en PC, "muted" es para que comience en silencio, si no se coloca no aparece el vídeo, aparecería un cuadro negro  -->
      <video id="mivideo" crossorigin="anonymous" playsinline webkitplaysinline autoplay controls muted src="2.mp4"></video>
      <a-video src="#mivideo" position="0 0 0" rotation="270 0 0"></a-video>  <!-- Características del vídeo -->

      <!-- Script que permite reproducir y detener el vídeo -->
      <script>
        //Cuando se enfoca el marcador, se pone play al vídeo:
        var m = document.querySelector("a-marker");
        m.addEventListener("markerFound", (e) => {
          console.log("found");
          var v = document.querySelector("#mivideo").play();  //Si quiero hacer otra cosa, ésta línea es la que se debería cambiar
        });
        //Cuando se deja de enforcar el marcador, el vídeo se pone en pausa:
        m.addEventListener("markerLost", (e) => {
          console.log("lost");
          var v = document.querySelector("#mivideo").pause();
        });

        //Cuando se hace clic sobre el botón se activa el sonido.
        document.querySelector("button").addEventListener("click", (e) => {
          console.log("Activar Sonido");
          var v = (document.querySelector("#mivideo").muted = false); //Si quiero hacer otra cosa, ésta línea es la que se debería cambiar
        });
      </script>
    </a-marker>
    <a-entity camera></a-entity>  <!-- Cierro la entiedad de cámara -->
  </a-scene>
</body>
